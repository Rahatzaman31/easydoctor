import{r as e,j as t}from"./react-vendor-KvxbO3mS.js";import"./vendor-ZcaEhcQo.js";import"./editor-vendor-CSPj58cm.js";function s(){const[s,r]=e.useState(!1),[n,i]=e.useState(null),[a,o]=e.useState(!1),[l,c]=e.useState(0),[u,d]=e.useState(!1),m=e.useRef(null),h=e.useRef(null),x=e.useRef(!0);e.useEffect(()=>{const e=()=>{d(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const f=e.useCallback(e=>{if(x.current)if(r(!0),sessionStorage.setItem("interstitial_ad_shown","true"),e.show_close_button){const t=e.close_button_delay??3;if(0===t)o(!0),c(0);else{c(t);let e=t;const s=()=>{x.current&&(e--,e<=0?(o(!0),c(0)):(c(e),h.current=setTimeout(s,1e3)))};h.current=setTimeout(s,1e3)}}else o(!1)},[]);if(e.useEffect(()=>(x.current=!0,async function(){try{const e=await fetch("/api/interstitial-ads"),t=await e.json();if(t.success&&t.data&&t.data.is_enabled&&x.current){i(t.data);const e=sessionStorage.getItem("interstitial_ad_shown");if(t.data.show_once_per_session&&e)return;const s=1e3*(t.data.delay_seconds??60);m.current=setTimeout(()=>{f(t.data)},s)}}catch(e){}}(),()=>{x.current=!1,m.current&&clearTimeout(m.current),h.current&&clearInterval(h.current)}),[f]),!s||!n)return null;const p=u?n.mobile_image_url:n.desktop_image_url,w=u?n.desktop_image_url:n.mobile_image_url;return p||w?t.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/80 backdrop-blur-sm animate-fadeIn",children:t.jsxs("div",{className:"relative w-full h-full flex items-center justify-center p-4 sm:p-6 md:p-8",children:[n.show_close_button&&t.jsx("button",{onClick:function(){a&&r(!1)},disabled:!a,className:"absolute top-4 right-4 sm:top-6 sm:right-6 z-10 flex items-center justify-center w-10 h-10 sm:w-12 sm:h-12 rounded-full transition-all duration-300 "+(a?"bg-white text-gray-800 hover:bg-gray-100 cursor-pointer shadow-lg":"bg-white/20 text-white cursor-not-allowed"),children:a?t.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):t.jsx("span",{className:"text-lg sm:text-xl font-bold",children:l})}),t.jsxs("div",{onClick:function(){n?.link_url&&window.open(n.link_url,"_blank","noopener,noreferrer")},className:"relative flex items-center justify-center "+(n.link_url?"cursor-pointer":""),style:{margin:"0 auto"},children:[t.jsxs("picture",{className:"flex items-center justify-center",children:[t.jsx("source",{media:"(max-width: 767px)",srcSet:n.mobile_image_url||n.desktop_image_url}),t.jsx("source",{media:"(min-width: 768px)",srcSet:n.desktop_image_url||n.mobile_image_url}),t.jsx("img",{src:p||w,alt:"বিজ্ঞাপন",className:"max-h-[85vh] sm:max-h-[90vh] w-auto h-auto object-contain rounded-lg sm:rounded-xl shadow-2xl mx-auto",style:{maxWidth:u?"calc(100vw - 32px)":"90vw"}})]}),n.link_url&&t.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent p-3 sm:p-4 rounded-b-lg sm:rounded-b-xl",children:t.jsxs("p",{className:"text-white text-xs sm:text-sm text-center flex items-center justify-center gap-1 sm:gap-2",children:[t.jsx("span",{children:"বিস্তারিত দেখতে ক্লিক করুন"}),t.jsx("svg",{className:"w-3 h-3 sm:w-4 sm:h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})})]})]})}):null}export{s as default};
