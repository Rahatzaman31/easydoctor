import{r as e,j as s}from"./react-vendor-DK4SYnaI.js";import{s as t,i as r}from"./index-DdJT-0ac.js";import{o as a}from"./vendor-Ct5Y5_H5.js";import"./editor-vendor-DQbJo6Zw.js";import"./supabase-vendor-CZ5UGAb5.js";const l=e=>{const s=["০","১","২","৩","৪","৫","৬","৭","৮","৯"];return String(e).replace(/[0-9]/g,e=>s[parseInt(e)])};function i(){const[i,n]=e.useState("appointment"),[o,d]=e.useState(""),[c,x]=e.useState(null),[m,h]=e.useState(!1),[p,j]=e.useState(""),u=e.useRef(null),[g,f]=e.useState(!1),[b,v]=e.useState(""),[N,w]=e.useState(null),[y,k]=e.useState(!1),[L,C]=e.useState(""),[M,z]=e.useState(!1);async function _(e){if(u.current){f(!0);try{const s=await a(u.current,{scale:2,backgroundColor:"#ffffff",logging:!1,useCORS:!0}),t=document.createElement("a");t.download=`appointment-${c.booking_ref}.${e}`,t.href=s.toDataURL(`image/${e}`,.95),t.click()}catch(s){alert("ডাউনলোড করতে সমস্যা হয়েছে")}finally{f(!1)}}}async function W(e){if(!e)return null;if(!e.startsWith("storage:"))return e;const s=e.replace("storage:",""),{data:r,error:a}=await t.storage.from("prescriptions").createSignedUrl(s,3600);return a?null:r.signedUrl}return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsxs("section",{className:"bg-gradient-to-br from-primary-600 via-primary-700 to-primary-800 text-white pt-24 pb-20 relative overflow-hidden",children:[s.jsxs("div",{className:"absolute inset-0 opacity-10",children:[s.jsx("div",{className:"absolute top-10 left-10 w-32 h-32 border-4 border-white rounded-full"}),s.jsx("div",{className:"absolute bottom-10 right-10 w-48 h-48 border-4 border-white rounded-full"}),s.jsx("div",{className:"absolute top-1/2 left-1/4 w-24 h-24 border-2 border-white rounded-full"})]}),s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-white/20 backdrop-blur-sm rounded-2xl mb-6",children:s.jsx("svg",{className:"w-10 h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})}),s.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"ডাউনলোড সেন্টার"}),s.jsx("p",{className:"text-xl md:text-2xl text-primary-100 max-w-2xl mx-auto",children:"আপনার অ্যাপয়েন্টমেন্ট স্লিপ এবং প্রেসক্রিপশন ডাউনলোড করুন"})]})})]}),s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden",children:[s.jsx("div",{className:"p-4 md:p-6 bg-gradient-to-r from-gray-50 to-slate-50 border-b border-gray-100",children:s.jsx("div",{className:"flex justify-center",children:s.jsxs("div",{className:"inline-flex p-1.5 bg-gray-100 rounded-2xl shadow-inner",children:[s.jsxs("button",{onClick:()=>n("appointment"),className:"relative flex items-center gap-3 px-6 py-3.5 rounded-xl font-semibold text-sm md:text-base transition-all duration-300 "+("appointment"===i?"bg-white text-primary-700 shadow-lg shadow-primary-100":"text-gray-500 hover:text-gray-700"),children:[s.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-xl transition-all duration-300 "+("appointment"===i?"bg-gradient-to-br from-primary-500 to-primary-600 text-white shadow-md":"bg-gray-200 text-gray-500"),children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),s.jsx("span",{className:"hidden sm:inline",children:"অ্যাপয়েন্টমেন্ট স্লিপ"}),s.jsx("span",{className:"sm:hidden",children:"স্লিপ"})]}),s.jsxs("button",{onClick:()=>n("prescription"),className:"relative flex items-center gap-3 px-6 py-3.5 rounded-xl font-semibold text-sm md:text-base transition-all duration-300 "+("prescription"===i?"bg-white text-amber-700 shadow-lg shadow-amber-100":"text-gray-500 hover:text-gray-700"),children:[s.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-xl transition-all duration-300 "+("prescription"===i?"bg-gradient-to-br from-amber-500 to-yellow-500 text-white shadow-md":"bg-gray-200 text-gray-500"),children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})}),s.jsx("span",{className:"hidden sm:inline",children:"প্রেসক্রিপশন"}),s.jsx("span",{className:"sm:hidden",children:"প্রেসক্রিপশন"}),s.jsx("span",{className:"absolute -top-1 -right-1 bg-gradient-to-r from-amber-500 to-yellow-500 text-white text-[10px] px-2 py-0.5 rounded-full font-bold shadow-sm",children:"প্রিমিয়াম"})]})]})})}),s.jsxs("div",{className:"p-6 md:p-8",children:["appointment"===i&&s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"text-center max-w-2xl mx-auto",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-primary-100 rounded-2xl mb-4",children:s.jsx("svg",{className:"w-8 h-8 text-primary-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"অ্যাপয়েন্টমেন্ট খুঁজুন"}),s.jsx("p",{className:"text-gray-600",children:"আপনার রেফারেন্স নম্বর অথবা ফোন নম্বর দিয়ে অ্যাপয়েন্টমেন্ট খুঁজুন এবং স্লিপ ডাউনলোড করুন"})]}),s.jsx("form",{onSubmit:async function(e){if(e.preventDefault(),o.trim()){h(!0),j(""),x(null);try{if(!t||!r)return void j("ডাটাবেস সংযোগ নেই");let{data:e,error:s}=await t.from("appointments").select("*").or(`booking_ref.ilike.%${o}%,patient_phone.ilike.%${o}%`).not("status","eq","cancelled").order("created_at",{ascending:!1}).limit(1);if(s)throw s;if(e&&0!==e.length)x({...e[0],isPaid:!1});else{let{data:e,error:s}=await t.from("paid_appointments").select("*").or(`booking_ref.ilike.%${o}%,patient_phone.ilike.%${o}%`).not("status","eq","cancelled").order("created_at",{ascending:!1}).limit(1);if(s)throw s;e&&e.length>0&&e[0].patient_name?x({...e[0],isPaid:!0}):j("কোনো অ্যাপয়েন্টমেন্ট পাওয়া যায়নি। সঠিক রেফারেন্স বা ফোন নম্বর দিন।")}}catch(s){j("তথ্য খোঁজার সময় সমস্যা হয়েছে। আবার চেষ্টা করুন।")}finally{h(!1)}}else j("রেফারেন্স নম্বর বা ফোন নম্বর দিন")},className:"max-w-xl mx-auto",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:s.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),s.jsx("input",{type:"text",value:o,onChange:e=>d(e.target.value),placeholder:"রেফারেন্স নম্বর বা ফোন নম্বর",className:"w-full pl-12 pr-4 py-4 border-2 border-gray-200 rounded-xl focus:border-primary-500 focus:ring-2 focus:ring-primary-200 outline-none transition-all text-lg"})]}),s.jsx("button",{type:"submit",disabled:m,className:"px-8 py-4 bg-gradient-to-r from-primary-600 to-primary-700 hover:from-primary-700 hover:to-primary-800 text-white font-semibold rounded-xl transition-all disabled:opacity-50 shadow-lg shadow-primary-600/30",children:m?s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsxs("svg",{className:"animate-spin w-5 h-5",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"খুঁজছি..."]}):"খুঁজুন"})]})}),p&&s.jsx("div",{className:"max-w-xl mx-auto bg-red-50 border border-red-200 rounded-xl p-4 text-center",children:s.jsxs("p",{className:"text-red-600 flex items-center justify-center gap-2",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),p]})}),c&&s.jsxs("div",{className:"max-w-2xl mx-auto",children:[s.jsxs("div",{ref:u,className:"bg-gradient-to-br from-white to-gray-50 rounded-2xl border-2 border-primary-100 overflow-hidden",children:[s.jsx("div",{className:(c.isPaid?"bg-gradient-to-r from-amber-500 to-yellow-500":"bg-gradient-to-r from-primary-600 to-primary-700")+" text-white p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("img",{src:"/logo-icon.png",alt:"ইজি ডক্টর রংপুর",className:"w-12 h-12 rounded-xl object-cover"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold",children:"ইজি ডক্টর রংপুর"}),s.jsx("p",{className:"text-sm opacity-90",children:"অ্যাপয়েন্টমেন্ট স্লিপ"})]})]}),s.jsxs("div",{className:"text-right",children:[c.isPaid&&s.jsxs("span",{className:"inline-flex items-center gap-1 bg-white/20 text-white text-xs px-3 py-1 rounded-full mb-1",children:[s.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),"পেইড সিরিয়াল"]}),s.jsx("p",{className:"text-2xl font-bold",children:c.booking_ref})]})]})}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider border-b pb-2",children:"রোগীর তথ্য"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-8 h-8 bg-primary-100 rounded-lg flex items-center justify-center flex-shrink-0",children:s.jsx("svg",{className:"w-4 h-4 text-primary-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500",children:"নাম"}),s.jsx("p",{className:"font-semibold text-gray-800",children:c.patient_name||"তথ্য নেই"})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center flex-shrink-0",children:s.jsx("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500",children:"ফোন"}),s.jsx("p",{className:"font-semibold text-gray-800",children:c.patient_phone||"তথ্য নেই"})]})]}),c.patient_age&&s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0",children:s.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500",children:"বয়স"}),s.jsxs("p",{className:"font-semibold text-gray-800",children:[l(c.patient_age)," বছর"]})]})]}),(c.upazila||c.district)&&s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center flex-shrink-0",children:s.jsxs("svg",{className:"w-4 h-4 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500",children:"ঠিকানা"}),s.jsxs("p",{className:"font-semibold text-gray-800",children:[c.upazila,c.upazila&&c.district?", ":"",c.district]})]})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider border-b pb-2",children:"অ্যাপয়েন্টমেন্ট তথ্য"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center flex-shrink-0",children:s.jsx("svg",{className:"w-4 h-4 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500",children:"ডাক্তার"}),s.jsx("p",{className:"font-semibold text-gray-800",children:c.doctor_name||"তথ্য নেই"})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-8 h-8 bg-rose-100 rounded-lg flex items-center justify-center flex-shrink-0",children:s.jsx("svg",{className:"w-4 h-4 text-rose-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500",children:"তারিখ"}),s.jsx("p",{className:"font-semibold text-gray-800",children:c.appointment_date||"তথ্য নেই"})]})]}),c.serial_number&&s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-8 h-8 bg-teal-100 rounded-lg flex items-center justify-center flex-shrink-0",children:s.jsx("svg",{className:"w-4 h-4 text-teal-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 20l4-16m2 16l4-16M6 9h14M4 15h14"})})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500",children:"সিরিয়াল নম্বর"}),s.jsx("p",{className:"font-semibold text-gray-800",children:l(c.serial_number)})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-8 h-8 bg-amber-100 rounded-lg flex items-center justify-center flex-shrink-0",children:s.jsx("svg",{className:"w-4 h-4 text-amber-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500",children:"স্ট্যাটাস"}),s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+("confirmed"===c.status?"bg-green-100 text-green-700":"completed"===c.status?"bg-blue-100 text-blue-700":"cancelled"===c.status?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"),children:"confirmed"===c.status?"নিশ্চিত":"completed"===c.status?"সম্পন্ন":"cancelled"===c.status?"বাতিল":"অপেক্ষমান"})]})]})]})]})]}),c.isPaid&&c.transaction_id&&s.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl p-4 border border-green-200",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-xl flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-green-600",children:"পেমেন্ট সফল"}),s.jsxs("p",{className:"font-semibold text-green-700",children:["TrxID: ",c.transaction_id]}),c.payment_amount&&s.jsxs("p",{className:"text-sm text-green-600",children:["৳",l(c.payment_amount)]})]})]})}),s.jsxs("div",{className:"text-center text-xs text-gray-400 pt-4 border-t",children:[s.jsx("p",{children:"অনুগ্রহ করে এই স্লিপটি ডাক্তারের চেম্বারে দেখান"}),s.jsx("p",{className:"mt-1",children:"www.rangpurdoctor.com"})]})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center mt-6",children:[s.jsxs("button",{onClick:()=>_("jpeg"),disabled:g,className:"flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold rounded-xl transition-all disabled:opacity-50 shadow-lg",children:[g?s.jsxs("svg",{className:"animate-spin w-5 h-5",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"JPEG ডাউনলোড"]}),s.jsxs("button",{onClick:()=>_("png"),disabled:g,className:"flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white font-semibold rounded-xl transition-all disabled:opacity-50 shadow-lg",children:[g?s.jsxs("svg",{className:"animate-spin w-5 h-5",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"PNG ডাউনলোড"]})]})]})]}),"prescription"===i&&s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"text-center max-w-2xl mx-auto",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-amber-100 to-yellow-100 rounded-2xl mb-4",children:s.jsx("svg",{className:"w-8 h-8 text-amber-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),s.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"প্রেসক্রিপশন ডাউনলোড"}),s.jsx("span",{className:"bg-gradient-to-r from-amber-500 to-yellow-500 text-white text-xs px-3 py-1 rounded-full font-medium",children:"প্রিমিয়াম সার্ভিস"})]}),s.jsx("p",{className:"text-gray-600",children:"পেইড সিরিয়াল গ্রাহকরা ডাক্তারের প্রেসক্রিপশন ডাউনলোড করতে পারবেন"})]}),s.jsx("div",{className:"max-w-xl mx-auto bg-gradient-to-r from-amber-50 to-yellow-50 rounded-2xl p-6 border border-amber-200",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"w-12 h-12 bg-amber-100 rounded-xl flex items-center justify-center flex-shrink-0",children:s.jsx("svg",{className:"w-6 h-6 text-amber-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-amber-800 mb-1",children:"এই সেবা কীভাবে কাজ করে?"}),s.jsxs("ul",{className:"text-sm text-amber-700 space-y-1",children:[s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-1.5 h-1.5 bg-amber-500 rounded-full"}),"শুধুমাত্র পেইড সিরিয়াল গ্রাহকরা এই সেবা পাবেন"]}),s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-1.5 h-1.5 bg-amber-500 rounded-full"}),"ডাক্তার দেখানোর পর প্রেসক্রিপশন আপলোড করা হবে"]}),s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-1.5 h-1.5 bg-amber-500 rounded-full"}),"প্রেসক্রিপশন আপলোড হলে এখান থেকে ডাউনলোড করতে পারবেন"]})]})]})]})}),s.jsx("form",{onSubmit:async function(e){if(e.preventDefault(),b.trim()){k(!0),C(""),w(null);try{if(!t||!r)return void C("ডাটাবেস সংযোগ নেই");let{data:e,error:s}=await t.from("paid_appointments").select("*").or(`booking_ref.ilike.%${b}%,patient_phone.ilike.%${b}%`).order("created_at",{ascending:!1}).limit(1);if(s)throw s;e&&0!==e.length?w(e[0]):C("কোনো প্রিমিয়াম বুকিং পাওয়া যায়নি। এই সেবাটি শুধুমাত্র পেইড সিরিয়াল গ্রাহকদের জন্য।")}catch(s){C("তথ্য খোঁজার সময় সমস্যা হয়েছে। আবার চেষ্টা করুন।")}finally{k(!1)}}else C("রেফারেন্স নম্বর বা ফোন নম্বর দিন")},className:"max-w-xl mx-auto",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:s.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),s.jsx("input",{type:"text",value:b,onChange:e=>v(e.target.value),placeholder:"পেইড সিরিয়াল রেফারেন্স বা ফোন নম্বর",className:"w-full pl-12 pr-4 py-4 border-2 border-amber-200 rounded-xl focus:border-amber-500 focus:ring-2 focus:ring-amber-200 outline-none transition-all text-lg"})]}),s.jsx("button",{type:"submit",disabled:y,className:"px-8 py-4 bg-gradient-to-r from-amber-500 to-yellow-500 hover:from-amber-600 hover:to-yellow-600 text-white font-semibold rounded-xl transition-all disabled:opacity-50 shadow-lg shadow-amber-500/30",children:y?s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsxs("svg",{className:"animate-spin w-5 h-5",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"খুঁজছি..."]}):"খুঁজুন"})]})}),L&&s.jsx("div",{className:"max-w-xl mx-auto bg-red-50 border border-red-200 rounded-xl p-4 text-center",children:s.jsxs("p",{className:"text-red-600 flex items-center justify-center gap-2",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),L]})}),N&&s.jsx("div",{className:"max-w-2xl mx-auto",children:s.jsxs("div",{className:"bg-white rounded-2xl border-2 border-amber-100 overflow-hidden shadow-lg",children:[s.jsx("div",{className:"bg-gradient-to-r from-amber-500 to-yellow-500 text-white p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold",children:"প্রেসক্রিপশন"}),s.jsxs("p",{className:"text-sm opacity-90",children:["রেফ: ",N.booking_ref]})]})]}),s.jsx("div",{className:"text-right",children:s.jsx("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium "+(N.prescription_url?"bg-green-100 text-green-700":"bg-white/20 text-white"),children:N.prescription_url?s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),"প্রেসক্রিপশন প্রস্তুত"]}):"অপেক্ষমান"})})]})}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-6",children:[s.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[s.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"রোগী"}),s.jsx("p",{className:"font-semibold text-gray-800",children:N.patient_name||"তথ্য নেই"}),s.jsx("p",{className:"text-sm text-gray-600",children:N.patient_phone||"তথ্য নেই"})]}),s.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[s.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"ডাক্তার"}),s.jsx("p",{className:"font-semibold text-gray-800",children:N.doctor_name||"তথ্য নেই"}),s.jsx("p",{className:"text-sm text-gray-600",children:N.appointment_date||"তথ্য নেই"})]})]}),N.prescription_url?s.jsx("div",{className:"text-center",children:s.jsxs("div",{className:"bg-green-50 rounded-xl p-6 mb-4",children:[s.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:s.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsx("h4",{className:"text-lg font-semibold text-green-700 mb-2",children:"প্রেসক্রিপশন প্রস্তুত!"}),s.jsx("p",{className:"text-green-600 text-sm mb-4",children:"আপনার প্রেসক্রিপশন ডাউনলোডের জন্য প্রস্তুত"}),s.jsx("button",{onClick:async function(){if(null==N?void 0:N.prescription_url){z(!0);try{const e=await W(N.prescription_url);if(!e)return void alert("প্রেসক্রিপশন ডাউনলোড করতে সমস্যা হয়েছে");const s=await fetch(e),t=await s.blob(),r=window.URL.createObjectURL(t),a=document.createElement("a");a.href=r;const l=(N.prescription_url.startsWith("storage:"),N.prescription_url.split(".").pop());a.download=`prescription-${N.booking_ref}.${l}`,a.click(),window.URL.revokeObjectURL(r)}catch(e){const s=await W(N.prescription_url);s&&window.open(s,"_blank")}finally{z(!1)}}},disabled:M,className:"inline-flex items-center gap-2 px-8 py-4 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white font-semibold rounded-xl transition-all disabled:opacity-50 shadow-lg",children:M?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin w-5 h-5",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"ডাউনলোড হচ্ছে..."]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"প্রেসক্রিপশন ডাউনলোড"]})})]})}):s.jsx("div",{className:"text-center",children:s.jsxs("div",{className:"bg-amber-50 rounded-xl p-6",children:[s.jsx("div",{className:"w-16 h-16 bg-amber-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:s.jsx("svg",{className:"w-8 h-8 text-amber-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsx("h4",{className:"text-lg font-semibold text-amber-700 mb-2",children:"প্রেসক্রিপশন অপেক্ষমান"}),s.jsx("p",{className:"text-amber-600 text-sm",children:"ডাক্তার দেখানোর পর প্রেসক্রিপশন আপলোড করা হবে। অনুগ্রহ করে কিছুক্ষণ পর আবার চেক করুন।"})]})})]})]})})]})]})]})}),s.jsx("section",{className:"py-16",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-4",children:"কীভাবে ডাউনলোড করবেন?"}),s.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"সহজ তিনটি ধাপে আপনার অ্যাপয়েন্টমেন্ট স্লিপ বা প্রেসক্রিপশন ডাউনলোড করুন"})]}),s.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"text-center group",children:[s.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-primary-100 to-primary-200 rounded-2xl flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform",children:s.jsx("span",{className:"text-3xl font-bold text-primary-600",children:"১"})}),s.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"রেফারেন্স দিন"}),s.jsx("p",{className:"text-gray-600",children:"আপনার বুকিং রেফারেন্স নম্বর অথবা মোবাইল নম্বর দিন"})]}),s.jsxs("div",{className:"text-center group",children:[s.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-100 to-blue-200 rounded-2xl flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform",children:s.jsx("span",{className:"text-3xl font-bold text-blue-600",children:"২"})}),s.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"তথ্য দেখুন"}),s.jsx("p",{className:"text-gray-600",children:"আপনার অ্যাপয়েন্টমেন্ট বা প্রেসক্রিপশন এর বিস্তারিত দেখুন"})]}),s.jsxs("div",{className:"text-center group",children:[s.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-green-100 to-green-200 rounded-2xl flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform",children:s.jsx("span",{className:"text-3xl font-bold text-green-600",children:"৩"})}),s.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"ডাউনলোড করুন"}),s.jsx("p",{className:"text-gray-600",children:"JPEG বা PNG ফরম্যাটে ডাউনলোড করুন"})]})]})]})}),s.jsx("section",{className:"py-12 bg-gray-100",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-xl p-6 flex items-center gap-4",children:[s.jsx("div",{className:"w-14 h-14 bg-primary-100 rounded-xl flex items-center justify-center flex-shrink-0",children:s.jsx("svg",{className:"w-7 h-7 text-primary-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-800",children:"নিরাপদ ও গোপনীয়"}),s.jsx("p",{className:"text-sm text-gray-600",children:"আপনার তথ্য সম্পূর্ণ সুরক্ষিত"})]})]}),s.jsxs("div",{className:"bg-white rounded-xl p-6 flex items-center gap-4",children:[s.jsx("div",{className:"w-14 h-14 bg-green-100 rounded-xl flex items-center justify-center flex-shrink-0",children:s.jsx("svg",{className:"w-7 h-7 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-800",children:"দ্রুত ডাউনলোড"}),s.jsx("p",{className:"text-sm text-gray-600",children:"মাত্র কয়েক সেকেন্ডে"})]})]}),s.jsxs("div",{className:"bg-white rounded-xl p-6 flex items-center gap-4",children:[s.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-xl flex items-center justify-center flex-shrink-0",children:s.jsx("svg",{className:"w-7 h-7 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-800",children:"হাই কোয়ালিটি"}),s.jsx("p",{className:"text-sm text-gray-600",children:"JPEG ও PNG ফরম্যাট"})]})]})]})})})]})}export{i as default};
