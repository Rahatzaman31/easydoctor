import{g as e,r as t,j as s}from"./react-vendor-KvxbO3mS.js";import{s as a,i as l}from"./index-D0fMXm6Q.js";import{D as n}from"./DoctorAdminSidebar-UPJWOQbi.js";import"./vendor-ZcaEhcQo.js";import"./editor-vendor-CSPj58cm.js";import"./supabase-DvSZys4T.js";function d(){const d=e(),[o,r]=t.useState(!0),[i,c]=t.useState({totalAppointments:0,pendingAppointments:0,todayAppointments:0,totalCompleted:0}),[m,x]=t.useState([]),p=localStorage.getItem("doctorId"),h=localStorage.getItem("doctorName");function g(e){return e?new Date(e).toLocaleDateString("bn-BD",{year:"numeric",month:"short",day:"numeric"}):"-"}t.useEffect(()=>{localStorage.getItem("doctorLoggedIn")?async function(){try{if(!a||!l||!p)return void r(!1);const e=(new Date).toISOString().split("T")[0],[t,s,n,d]=await Promise.all([a.from("appointments").select("id",{count:"exact"}).eq("doctor_id",p).eq("status","completed"),a.from("appointments").select("id",{count:"exact"}).eq("doctor_id",p).eq("status","pending"),a.from("appointments").select("id",{count:"exact"}).eq("doctor_id",p).eq("status","confirmed").eq("appointment_date",e),a.from("appointments").select("*").eq("doctor_id",p).in("status",["confirmed","pending"]).order("created_at",{ascending:!1}).limit(10)]),o=t.count||0,i=s.count||0,m=n.count||0;c({totalAppointments:o,pendingAppointments:i,todayAppointments:m,totalCompleted:o}),x(d.data||[])}catch(e){}finally{r(!1)}}():d("/doctor.admin/login")},[]);const u=[{label:"‡¶Æ‡ßã‡¶ü ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü‡¶Æ‡ßá‡¶®‡ßç‡¶ü",value:i.totalAppointments,icon:"üìã",color:"from-blue-500 to-blue-600"},{label:"‡¶Ö‡¶™‡ßá‡¶ï‡ßç‡¶∑‡¶Æ‡¶æ‡¶®",value:i.pendingAppointments,icon:"‚è≥",color:"from-yellow-500 to-orange-500"},{label:"‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶∏‡¶ø‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶≤",value:i.todayAppointments,icon:"üìÖ",color:"from-green-500 to-emerald-600"},{label:"‡¶Æ‡ßã‡¶ü ‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶®",value:i.totalCompleted,icon:"‚úÖ",color:"from-teal-500 to-cyan-600"}];return s.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[s.jsx(n,{}),s.jsxs("div",{className:"flex-1 p-4 pt-16 lg:pt-6 lg:p-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("h1",{className:"text-2xl lg:text-3xl font-bold text-gray-800",children:["‡¶∏‡ßç‡¶¨‡¶æ‡¶ó‡¶§‡¶Æ, ",h]}),s.jsx("p",{className:"text-gray-500 mt-1",children:"‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶°‡ßç‡¶Ø‡¶æ‡¶∂‡¶¨‡ßã‡¶∞‡ßç‡¶°‡ßá ‡¶∏‡ßç‡¶¨‡¶æ‡¶ó‡¶§‡¶Æ"})]}),o?s.jsx("div",{className:"text-center py-20",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-teal-600 mx-auto"})}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:u.map((e,t)=>s.jsxs("div",{className:`bg-gradient-to-br ${e.color} rounded-2xl p-4 lg:p-6 text-white shadow-lg`,children:[s.jsx("div",{className:"flex items-center justify-between mb-2",children:s.jsx("span",{className:"text-2xl lg:text-3xl",children:e.icon})}),s.jsx("p",{className:"text-2xl lg:text-3xl font-bold",children:e.value}),s.jsx("p",{className:"text-white/80 text-sm mt-1",children:e.label})]},t))}),s.jsxs("div",{className:"bg-white rounded-2xl shadow-md overflow-hidden",children:[s.jsx("div",{className:"p-6 border-b border-gray-100",children:s.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[s.jsx("span",{children:"üìã"}),"‡¶∏‡¶æ‡¶Æ‡ßç‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶ï ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü‡¶Æ‡ßá‡¶®‡ßç‡¶ü"]})}),0===m.length?s.jsxs("div",{className:"p-12 text-center",children:[s.jsx("span",{className:"text-5xl mb-4 block",children:"üì≠"}),s.jsx("p",{className:"text-gray-500",children:"‡¶ï‡ßã‡¶®‡ßã ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶®‡ßá‡¶á"})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"hidden lg:block overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{className:"text-left text-gray-600",children:[s.jsx("th",{className:"px-6 py-4 text-sm font-semibold",children:"‡¶∞‡ßá‡¶´ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞"}),s.jsx("th",{className:"px-6 py-4 text-sm font-semibold",children:"‡¶∞‡ßã‡¶ó‡ßÄ‡¶∞ ‡¶®‡¶æ‡¶Æ"}),s.jsx("th",{className:"px-6 py-4 text-sm font-semibold",children:"‡¶´‡ßã‡¶®"}),s.jsx("th",{className:"px-6 py-4 text-sm font-semibold",children:"‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ"}),s.jsx("th",{className:"px-6 py-4 text-sm font-semibold",children:"‡¶ß‡¶∞‡¶®"}),s.jsx("th",{className:"px-6 py-4 text-sm font-semibold",children:"‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-100",children:m.map(e=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 font-medium text-teal-600",children:e.booking_ref}),s.jsxs("td",{className:"px-6 py-4",children:[s.jsx("p",{className:"font-medium text-gray-800",children:e.patient_name}),s.jsxs("p",{className:"text-xs text-gray-500",children:[e.patient_age," ‡¶¨‡¶õ‡¶∞"]})]}),s.jsx("td",{className:"px-6 py-4 text-gray-600",children:e.patient_phone}),s.jsx("td",{className:"px-6 py-4 text-gray-600",children:g(e.appointment_date)}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+(e.hasOwnProperty("payment_status")?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"),children:e.hasOwnProperty("payment_status")?"‡¶™‡ßá‡¶á‡¶°":"‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶®"})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium "+("confirmed"===e.status?"bg-green-100 text-green-700":"cancelled"===e.status?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"),children:"confirmed"===e.status?"‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§":"cancelled"===e.status?"‡¶¨‡¶æ‡¶§‡¶ø‡¶≤":"‡¶Ö‡¶™‡ßá‡¶ï‡ßç‡¶∑‡¶Æ‡¶æ‡¶®"})})]},e.id))})]})}),s.jsx("div",{className:"lg:hidden space-y-3 p-4",children:m.map(e=>s.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[s.jsxs("div",{className:"flex justify-between items-start mb-3",children:[s.jsx("span",{className:"font-medium text-teal-600 text-sm",children:e.booking_ref}),s.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+("confirmed"===e.status?"bg-green-100 text-green-700":"cancelled"===e.status?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"),children:"confirmed"===e.status?"‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§":"cancelled"===e.status?"‡¶¨‡¶æ‡¶§‡¶ø‡¶≤":"‡¶Ö‡¶™‡ßá‡¶ï‡ßç‡¶∑‡¶Æ‡¶æ‡¶®"})]}),s.jsx("p",{className:"font-medium text-gray-800",children:e.patient_name}),s.jsxs("div",{className:"flex gap-4 mt-2 text-sm text-gray-500",children:[s.jsx("span",{children:e.patient_phone}),s.jsx("span",{children:g(e.appointment_date)})]})]},e.id))})]})]})]})]})]})}export{d as default};
