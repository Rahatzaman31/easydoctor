import{g as e,r as t,j as s}from"./react-vendor-KvxbO3mS.js";import{s as a,i as l}from"./index-D0fMXm6Q.js";import{D as n}from"./DoctorAdminSidebar-UPJWOQbi.js";import"./vendor-ZcaEhcQo.js";import"./editor-vendor-CSPj58cm.js";import"./supabase-DvSZys4T.js";function d(){const d=e(),[i,r]=t.useState([]),[c,x]=t.useState(!0),[o,m]=t.useState(""),[p,h]=t.useState("all"),[g,u]=t.useState({daily:0,weekly:0,monthly:0}),f=localStorage.getItem("doctorId");function j(e){return e?new Date(e).toLocaleDateString("bn-BD",{year:"numeric",month:"short",day:"numeric"}):"-"}function y(e){return"confirmed"===e?{text:"à¦¨à¦¿à¦¶à§à¦šà¦¿à¦¤",class:"bg-green-100 text-green-700"}:"completed"===e?{text:"à¦¸à¦®à§à¦ªà¦¨à§à¦¨",class:"bg-blue-100 text-blue-700"}:{text:"à¦…à¦ªà§‡à¦•à§à¦·à¦®à¦¾à¦¨",class:"bg-yellow-100 text-yellow-700"}}t.useEffect(()=>{localStorage.getItem("doctorLoggedIn")?async function(){try{if(!a||!l||!f)return void x(!1);const{data:e,error:t}=await a.from("appointments").select("*").eq("doctor_id",f).in("status",["pending","confirmed","completed"]).order("appointment_date",{ascending:!1});if(t)throw t;r(e||[]),function(e){const t=new Date,s=t.toISOString().split("T")[0],a=new Date(t.getFullYear(),t.getMonth(),t.getDate()),l=new Date(a);l.setDate(l.getDate()+7);const n=new Date(t.getFullYear(),t.getMonth(),1),d=new Date(t.getFullYear(),t.getMonth()+1,0),i=e.filter(e=>e.appointment_date===s&&"confirmed"===e.status).length,r=e.filter(e=>{const t=new Date(e.appointment_date+"T00:00:00");return t>=a&&t<l&&["pending","confirmed"].includes(e.status)}).length,c=e.filter(e=>{const t=new Date(e.appointment_date+"T00:00:00");return t>=n&&t<=d&&["pending","confirmed"].includes(e.status)}).length;u({daily:i,weekly:r,monthly:c})}(e||[])}catch(e){}finally{x(!1)}}():d("/doctor.admin/login")},[]);const b=function(){let e=i;o&&(e=e.filter(e=>e.patient_name?.toLowerCase().includes(o.toLowerCase())||e.booking_ref?.toLowerCase().includes(o.toLowerCase())||e.patient_phone?.includes(o)));const t=new Date,s=t.toISOString().split("T")[0],a=new Date(t.getFullYear(),t.getMonth(),t.getDate());if("all"===p)e=e.filter(e=>["pending","confirmed","completed"].includes(e.status));else if("today"===p)e=e.filter(e=>e.appointment_date===s&&"confirmed"===e.status);else if("week"===p){const t=new Date(a);t.setDate(t.getDate()+7),e=e.filter(e=>{const s=new Date(e.appointment_date+"T00:00:00");return s>=a&&s<t&&["pending","confirmed"].includes(e.status)})}else if("month"===p){const s=new Date(t.getFullYear(),t.getMonth(),1),l=new Date(a);l.setDate(l.getDate()+1),e=e.filter(e=>{const t=new Date(e.appointment_date+"T00:00:00");return t>=s&&t<l&&["pending","confirmed","completed"].includes(e.status)})}return e}();return s.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[s.jsx(n,{}),s.jsxs("div",{className:"flex-1 p-4 pt-16 lg:pt-6 lg:p-8",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-gray-800",children:"à¦¸à¦¾à¦§à¦¾à¦°à¦¨ à¦¸à¦¿à¦°à¦¿à¦¯à¦¼à¦¾à¦²"}),s.jsx("p",{className:"text-gray-500 mt-1",children:"à¦†à¦ªà¦¨à¦¾à¦° à¦…à§à¦¯à¦¾à¦ªà¦¯à¦¼à§‡à¦¨à§à¦Ÿà¦®à§‡à¦¨à§à¦Ÿ à¦¸à¦®à§‚à¦¹"})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[s.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl p-4 lg:p-6 text-white shadow-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("span",{className:"text-2xl",children:"ğŸ“…"}),s.jsx("span",{className:"text-white/80 text-sm",children:"à¦†à¦œà¦•à§‡"})]}),s.jsx("p",{className:"text-2xl lg:text-3xl font-bold",children:g.daily}),s.jsx("p",{className:"text-white/70 text-sm",children:"à¦¨à¦¿à¦¶à§à¦šà¦¿à¦¤ à¦°à§‹à¦—à§€"})]}),s.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl p-4 lg:p-6 text-white shadow-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("span",{className:"text-2xl",children:"ğŸ“†"}),s.jsx("span",{className:"text-white/80 text-sm",children:"à¦à¦‡ à¦¸à¦ªà§à¦¤à¦¾à¦¹à§‡"})]}),s.jsx("p",{className:"text-2xl lg:text-3xl font-bold",children:g.weekly}),s.jsx("p",{className:"text-white/70 text-sm",children:"à¦¬à§à¦• à¦•à¦°à¦¾"})]}),s.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl p-4 lg:p-6 text-white shadow-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("span",{className:"text-2xl",children:"ğŸ—“ï¸"}),s.jsx("span",{className:"text-white/80 text-sm",children:"à¦à¦‡ à¦®à¦¾à¦¸à§‡"})]}),s.jsx("p",{className:"text-2xl lg:text-3xl font-bold",children:g.monthly}),s.jsx("p",{className:"text-white/70 text-sm",children:"à¦¬à§à¦• à¦•à¦°à¦¾"})]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-md p-4 lg:p-6 mb-6",children:s.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[s.jsx("div",{className:"flex-1",children:s.jsx("input",{type:"text",placeholder:"à¦¨à¦¾à¦®, à¦°à§‡à¦« à¦¨à¦®à§à¦¬à¦° à¦¬à¦¾ à¦«à§‹à¦¨ à¦¦à¦¿à¦¯à¦¼à§‡ à¦–à§à¦à¦œà§à¦¨...",value:o,onChange:e=>m(e.target.value),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-teal-500"})}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx("button",{onClick:()=>h("all"),className:"px-4 py-2 rounded-lg text-sm font-medium "+("all"===p?"bg-teal-600 text-white":"bg-gray-100 text-gray-700"),children:"à¦¸à¦¬"}),s.jsx("button",{onClick:()=>h("today"),className:"px-4 py-2 rounded-lg text-sm font-medium "+("today"===p?"bg-teal-600 text-white":"bg-gray-100 text-gray-700"),children:"à¦†à¦œà¦•à§‡"}),s.jsx("button",{onClick:()=>h("week"),className:"px-4 py-2 rounded-lg text-sm font-medium "+("week"===p?"bg-teal-600 text-white":"bg-gray-100 text-gray-700"),children:"à¦à¦‡ à¦¸à¦ªà§à¦¤à¦¾à¦¹"}),s.jsx("button",{onClick:()=>h("month"),className:"px-4 py-2 rounded-lg text-sm font-medium "+("month"===p?"bg-teal-600 text-white":"bg-gray-100 text-gray-700"),children:"à¦à¦‡ à¦®à¦¾à¦¸"})]})]})}),c?s.jsx("div",{className:"text-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-teal-600 mx-auto"})}):0===b.length?s.jsxs("div",{className:"bg-white rounded-xl shadow-md p-12 text-center",children:[s.jsx("span",{className:"text-5xl mb-4 block",children:"ğŸ“­"}),s.jsx("p",{className:"text-gray-500 text-lg",children:"à¦•à§‹à¦¨à§‹ à¦…à§à¦¯à¦¾à¦ªà¦¯à¦¼à§‡à¦¨à§à¦Ÿà¦®à§‡à¦¨à§à¦Ÿ à¦¨à§‡à¦‡"})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"hidden lg:block bg-white rounded-xl shadow-md overflow-hidden",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{className:"text-left text-gray-600",children:[s.jsx("th",{className:"px-6 py-4 text-sm font-semibold",children:"à¦°à§‡à¦« à¦¨à¦®à§à¦¬à¦°"}),s.jsx("th",{className:"px-6 py-4 text-sm font-semibold",children:"à¦°à§‹à¦—à§€à¦° à¦¨à¦¾à¦®"}),s.jsx("th",{className:"px-6 py-4 text-sm font-semibold",children:"à¦«à§‹à¦¨"}),s.jsx("th",{className:"px-6 py-4 text-sm font-semibold",children:"à¦¬à¦¯à¦¼à¦¸"}),s.jsx("th",{className:"px-6 py-4 text-sm font-semibold",children:"à¦²à¦¿à¦™à§à¦—"}),s.jsx("th",{className:"px-6 py-4 text-sm font-semibold",children:"à¦¤à¦¾à¦°à¦¿à¦–"}),s.jsx("th",{className:"px-6 py-4 text-sm font-semibold",children:"à¦¸à¦¿à¦°à¦¿à¦¯à¦¼à¦¾à¦² à¦¨à¦®à§à¦¬à¦°"}),s.jsx("th",{className:"px-6 py-4 text-sm font-semibold",children:"à¦¸à§à¦Ÿà§à¦¯à¦¾à¦Ÿà¦¾à¦¸"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-100",children:b.map(e=>{const t=y(e.status);return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 font-medium text-teal-600",children:e.booking_ref}),s.jsx("td",{className:"px-6 py-4 font-medium text-gray-800",children:e.patient_name}),s.jsx("td",{className:"px-6 py-4 text-gray-600",children:e.patient_phone}),s.jsxs("td",{className:"px-6 py-4 text-gray-600",children:[e.patient_age," à¦¬à¦›à¦°"]}),s.jsx("td",{className:"px-6 py-4 text-gray-600",children:"male"===e.patient_gender?"à¦ªà§à¦°à§à¦·":"female"===e.patient_gender?"à¦®à¦¹à¦¿à¦²à¦¾":"à¦…à¦¨à§à¦¯à¦¾à¦¨à§à¦¯"}),s.jsx("td",{className:"px-6 py-4 text-gray-600",children:j(e.appointment_date)}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("span",{className:"px-3 py-1 bg-teal-100 text-teal-700 rounded-full text-sm font-medium",children:["#",e.serial_number||"-"]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${t.class}`,children:t.text})})]},e.id)})})]})}),s.jsx("div",{className:"lg:hidden space-y-3",children:b.map(e=>{const t=y(e.status);return s.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4",children:[s.jsxs("div",{className:"flex justify-between items-start mb-3",children:[s.jsx("span",{className:"font-medium text-teal-600 text-sm",children:e.booking_ref}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("span",{className:"px-2 py-1 bg-teal-100 text-teal-700 rounded-full text-xs font-medium",children:["à¦¸à¦¿à¦°à¦¿à¦¯à¦¼à¦¾à¦² #",e.serial_number||"-"]}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${t.class}`,children:t.text})]})]}),s.jsx("p",{className:"font-medium text-gray-800",children:e.patient_name}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2 text-sm text-gray-500",children:[s.jsxs("span",{children:["ğŸ“ ",e.patient_phone]}),s.jsxs("span",{children:["ğŸ“… ",j(e.appointment_date)]}),s.jsxs("span",{children:["ğŸ‚ ",e.patient_age," à¦¬à¦›à¦°"]}),s.jsxs("span",{children:["ğŸ‘¤ ","male"===e.patient_gender?"à¦ªà§à¦°à§à¦·":"female"===e.patient_gender?"à¦®à¦¹à¦¿à¦²à¦¾":"à¦…à¦¨à§à¦¯à¦¾à¦¨à§à¦¯"]})]})]},e.id)})})]})]})]})}export{d as default};
